# 課題1

## 回答

<a href="https://imgur.com/wwCj5LB"><img src="https://i.imgur.com/CMkNEWw.png" title="source: imgur.com" width="100%" /></a>

## 考えたこと

- ワークスペース、チャネルに参加・脱退にどう対応するか？
  - boolean型のdeleted_flgを持たせることで、論理削除しようと考えたが、将来的に保存期間を超えたらデータを物理削除または、移行するという仕様を考えて、削除フラグではなく削除日を持たせることで対応する。
- メッセージとスレッドメッセージを分けるか、統一するか？
  - 分ける
    - メッセージに紐ずくスレッドメッセージを特定しやすいと考えたから。
  - 懸念点
    - メッセージとスレッドメッセージを横断的に、検索をかけるれるようにするといった横断機能に対応しずらくなる？
- 横断機能について
  - スレッドメッセージにもチャンネルIDを持たせることで、メッセージ、スレッドメッセージ共に所属しているチャネル内でしか検索できなくすることへ対応する。

## 議論内容

- メッセージとスレッドメッセージを区別するか?
  - 区別するメリット
    - アプリケーションコードの制御が容易になる。
    - 区別しない状態に変更が容易。
  - 区別しないメリット
    - 同一テーブルの検索できるので、パフォーマンスがいい。
    - 同一テーブルで取ってこれるので、整形、順序、整合性が取りやすい。
- ユーザーチャネルは論理削除すべきか物理削除すべきか?
  - 物理削除
    - アプリケーションコードの制御が容易になる。
  - 論理削除
    - いつ脱退するのかをログ管理までを1テーブルで完結可能。
